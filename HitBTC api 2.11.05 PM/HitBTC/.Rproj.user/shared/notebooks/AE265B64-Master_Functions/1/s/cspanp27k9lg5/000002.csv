"0","lastweek_minute <- function(crytocurrenty = ""BTC"", comparison = ""USD"") {"
"0","  library(dplyr)"
"0","  library(jsonlite)"
"0","  "
"0","  # Initialitaion of the data frame with all the desired output"
"0","  df <- data.frame("
"0","    Date=as.Date(character()),"
"0","    high=double(),"
"0","    low = double(),"
"0","    open = double(),"
"0","    close = double()"
"0","  )"
"0","  "
"0","  actualTime <- round(as.numeric(Sys.time()))"
"0","  MaxLimit <- as.numeric(Sys.time()-as.difftime(7, unit=""days""))"
"0","  "
"0","  # Number of points of  dataframe"
"0","  n <- round(actualTime-MaxLimit)/60"
"0","  "
"0","  # Round to the highest Integuer"
"0","  iterations <- ceiling(n/2000)"
"0","  "
"0","  # Set the time equal to the actual"
"0","  time = actualTime"
"0","  n1 <- 2000"
"0","  for (i in 1:iterations){"
"0","    if (i ==iterations){"
"0","      n1 =n-2000*(iterations-1) "
"0","    }"
"0","    link <- paste(""https://min-api.cryptocompare.com/data/histominute?fsym="",crytocurrenty, ""&tsym="", comparison,""&limit="", n1, ""&aggregate=1&toTs="",time, ""&extraParams=your_app_name"", sep = """")"
"0","    data <- fromJSON(link)"
"0","    df1 <- data.frame("
"0","      Date= as.POSIXct(data$Data$time,origin = ""1970-01-01"",tz = ""GMT""),"
"0","      high=data$Data$high,"
"0","      low = data$Data$low,"
"0","      open = data$Data$open,"
"0","      close = data$Data$close"
"0","    )"
"0","    df <- rbind(df, df1)"
"0","    time <- time - 2000*60"
"0","  }"
"0","  "
"0","  df <-df %>% mutate(direction = ifelse(open >close, ""increasing"", ""decreasing"")) %>% arrange(Date)"
"0","  return(df)"
"0","}"
